<html lang="pt-br">
<head>
    <%- include('partials/head') %>
</head>
<body>
    <%- include('partials/header') %>
    <main class="container mt-4">
        <div class="row">
            <h1> Bem-vindo mochileiro</h1>
            <h3> Save atual: <%= save.nome_save %> ID:<%= save.id %></h3>
            <button class="btn-editar-toggle"> Editar: </button><!-- colocar isso e as duas linhas de baixo ao lado da linha de cima, tipo: "save atual... EDITAR"-->
            <button type="submit" class="btn-concluir-toggle opcoes-save" form="renomearForm"> Concluir Edição </button>
            <form class="opcoes-save" id="renomearForm" action="/saves/<%= save.id %>/renomearatributos" method="POST"></form>
        </div>

        <div class="row mt-4">
            <div id="atrbt" class="menus save-display-menu col-md-4" >
                <p class="nome_reno"> Nome: <%= (typeof save !== 'undefined' && save.atributos) ? save.atributos.nome : '' %></p>
                <input class="input_reno opcoes-save" type="text" name="novo_nome" placeholder="Novo Nome" value="<%= (typeof save !== 'undefined' && save.atributos) ? save.atributos.nome : '' %>" required form="renomearForm"></input>
                <p> Nivel: <%= (typeof save !== 'undefined' && save.atributos) ? save.atributos.nivel : '' %></p>
                <p> Vida: <%= (typeof save !== 'undefined' && save.atributos) ? save.atributos.vida_atual : '' %> / <%= (typeof save !== 'undefined' && save.atributos) ? save.atributos.vida_maxima : '' %></p>
                <p> Ataque: <%= (typeof save !== 'undefined' && save.atributos) ? save.atributos.ataque : '' %></p>
                <p> Defesa: <%= (typeof save !== 'undefined' && save.atributos) ? save.atributos.defesa : '' %></p>
                <p> Dinheiro: <%= save.dinheiro %></p>
                <form action="/saves/<%= save.id %>/tirarvida" method="POST"> <button> Tirar Vida </button> </form>
                <form action="/saves/<%= save.id %>/adicionarvida" method="POST"> <button> Adicionar Vida </button> </form>
                <%- include('partials/adotarPetForm', { saveId: save.id }) %>
            </div>
            <div id="menu" class="menus opcoes-menu col-md-8">
                <%- include('partials/inventario', { inventario: inventario }) %>
                <form id="excluirItem" action="/menu/excluirItem" method="POST">
                    <select name="inventario_id">
                        <option value="" disabled selected>Selecione um pra descartar: </option>
                        <% inventario.forEach(item => { %>
                            <option value="<%= item.id %>">
                                <%= item.id %> - <%= item.nome %>
                            </option>
                        <% }); %>
                    </select>
                    <button type="submit"> Descartar! </button>
                </form>
                <button onclick="location.href='/ferreiro'" type="button"> Ferreiro </button>
            </div>
            

        </div>
    </main>
    <%- include('partials/footer') %>
</body>
<script>
    document.addEventListener('DOMContentLoaded', () => {
    const infoPet = document.querySelectorAll('.pet-info');
    const btnAdotar = document.querySelectorAll('.btn-adotar-toggle');
    const soltarPet = document.querySelectorAll('.soltar-pet');
    const btnEditar = document.querySelectorAll('.btn-editar-toggle');
    const btnConcluir = document.querySelectorAll('.btn-concluir-toggle');
    const inputReno = document.querySelectorAll('.input_reno');
    const inputPetReno = document.querySelectorAll('.input_pet_reno');
    const nomeReno = document.querySelectorAll('.nome_reno');
    const nomePetReno = document.querySelectorAll('.nome_pet_reno');

    btnEditar.forEach(button => {
        button.addEventListener('click', () => {
            inputReno.forEach(input => {
                input.classList.toggle('opcoes-save');
            });
            nomeReno.forEach(nome => {
                nome.classList.toggle('opcoes-save');
            });
            inputPetReno.forEach(input => {
                input.classList.toggle('opcoes-save');
            });
            nomePetReno.forEach(nome => {
                nome.classList.toggle('opcoes-save');
            });
            btnConcluir.forEach(btn => {
                btn.classList.toggle('opcoes-save');
            });
            soltarPet.forEach(form => {
                form.classList.toggle('opcoes-save');
            });
            button.classList.toggle('opcoes-save');
        });
    });

    btnConcluir.forEach(button => {
        button.addEventListener('click', () => {
            inputReno.forEach(input => {
                input.classList.toggle('opcoes-save');
            });
            nomeReno.forEach(nome => {
                nome.classList.toggle('opcoes-save');
            });
            inputPetReno.forEach(input => {
                input.classList.toggle('opcoes-save');
            });
            nomePetReno.forEach(nome => {
                nome.classList.toggle('opcoes-save');
            });
            btnEditar.forEach(btn => {
                btn.classList.toggle('opcoes-save');
            });
            button.classList.toggle('opcoes-save');
        });
    });

    btnAdotar.forEach(button => {
        button.addEventListener('click', () => {
            infoPet.forEach(pet => {
                pet.classList.toggle('opcoes-save');
            });
            button.classList.toggle('opcoes-save');
            
        });
    });
});
</script>
</html>